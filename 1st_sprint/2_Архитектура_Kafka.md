В этом уроке вы познакомитесь с моделями хранения данных, стилями взаимодействия с помощью данных и типами гарантий доставки сообщений.
Эти аспекты помогают использовать Kafka максимально эффективно, адаптируя её под требования конкретных приложений.

## **Модели хранения данных**

В системах обмена сообщениями важно, где и как хранятся сообщения, ведь их передача не всегда происходит мгновенно. 
Брокеры могут использовать разные подходы для временного хранения сообщений: очереди или журналы.

* Очередь — это простой список сообщений, которые ждут обработки. 
Сообщения добавляются отправителями (Producer) в очередь и удаляются после того, как их обработает потребитель (Consumer).
Очереди работают по принципу FIFO (первым пришёл — первым обработан), и отправитель не беспокоится о том, 
когда сообщение будет обработано — потребитель заберёт его, когда будет готов.

* Журнал — это структура, где сообщения сохраняются в упорядоченном виде, как лог событий. 
Потребители могут читать сообщения несколько раз и с разной скоростью, сохраняя информацию о своём положении в журнале. 
Сообщения не удаляются после чтения, что позволяет повторно обрабатывать их при необходимости. 
Журналы полезны, когда важен строгий порядок сообщений и возможность обрабатывать их по-разному.

Журналы требуют больше ресурсов, но обеспечивают гибкость и надёжность, в то время как очереди проще и легче в использовании.

## **Pull/push модели**

В брокерах сообщений есть два способа передачи данных от брокера к получателю: Pull-модель и Push-модель.
В моделях передачи сообщений также важно учитывать персистентность — сохранение сообщений для гарантии их доставки,
даже если система сталкивается с перебоями.

**Pull-модель** 
Эта модель работает так, что потребитель (Consumer) сам запрашивает сообщения у брокера, как если бы вы проверяли почту. 
Вы сами решаете, когда и сколько сообщений забирать. 
Это удобно, если у потребителя мало ресурсов или если обработка данных требует времени. 
Плюс, можно регулировать частоту запросов: чаще в период большого потока данных и реже, когда сообщений мало. 
Однако, минус в том, что потребитель должен постоянно опрашивать брокера, что может быть неэффективно, если сообщения приходят редко.

В этой модели брокер сохраняет сообщения, пока потребитель не заберёт их. 
Это полезно, если потребитель временно недоступен или обрабатывает данные медленно. 
Сообщения не теряются, поскольку хранятся до момента, когда потребитель их запросит и подтвердит получение.

**Push-модель**
В этой модели брокер сам отправляет сообщения потребителю, как уведомления на телефон. 
Потребитель не запрашивает сообщения, они поступают автоматически, как только появляются. 
Это экономит ресурсы и ускоряет процесс, но есть риск, что потребитель не успеет обработать все сообщения, 
если они приходят слишком быстро, что может вызвать перегрузку.

В Push-модели с персистентностью брокер тоже сохраняет сообщения, пока они не будут доставлены потребителю.
Если потребитель временно перегружен или отключен, брокер не потеряет сообщения, а дождётся возможности доставить их.
Однако, если потребитель обрабатывает сообщения медленно, они могут накапливаться, что создаст нагрузку на брокера.

Таким образом, каждый метод имеет свои плюсы и минусы, и выбор зависит от того, как работает система и какие задачи нужно решить.

В следующем уроке вы узнаете о способах взаимодействия сообщений и гарантиях доставки данных. 
Все вместе даст вам стартовые знания для правильно настроить систему у себя на проекте.

## Квиз
**Вопрос 1:** 

В чём основное отличие между очередью и журналом в моделях хранения данных?

A) Сообщения в очереди можно прочитать несколько раз, а в журнале — только один раз

B) Сообщения в журнале можно прочитать несколько раз, а в очереди — только один раз

C) Сообщения в очереди хранятся дольше, чем в журнале

D) Сообщения в журнале автоматически удаляются после прочтения

Правильный ответ: B) Сообщения в журнале можно прочитать несколько раз, а в очереди — только один раз

Пояснение: В очереди сообщения удаляются после того, как их обработает потребитель, а в журнале они остаются доступными для многократного чтения.

**Вопрос 2:** 

Какой недостаток есть у Push-модели передачи сообщений?

A) Потребитель может забрать слишком много сообщений сразу

B) Брокер должен постоянно опрашивать потребителя

C) Потребитель может быть перегружен, если сообщения приходят слишком быстро

D) Сообщения теряются, если их не забрать сразу

Правильный ответ: C) Потребитель может быть перегружен, если сообщения приходят слишком быстро

Пояснение: В Push-модели брокер автоматически отправляет сообщения потребителю, что может привести к его перегрузке, если сообщений слишком много.