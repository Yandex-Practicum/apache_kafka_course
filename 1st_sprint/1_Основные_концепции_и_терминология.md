В этом уроке вы познакомитесь с таким понятием, как брокер сообщений, а также узнаете, из каких базовых компонент они обычно состоят.

## **Что такое брокер сообщений?**
Брокер сообщений — это специальный сервис, который помогает передавать данные между разными приложениями. 
Его задача — получить информацию от одного компонента системы и передать её другому. Это что-то вроде "посредника", 
который делает взаимодействие между программами надёжным и удобным, даже если они написаны на разных языках
программирования или работают в разных условиях.

В современных системах, особенно в тех, где используется микросервисная архитектура, такие брокеры играют важную роль.
В микросервисах каждое приложение (или сервис) выполняет свою работу независимо от других, но при этом они должны 
обмениваться данными, чтобы вся система работала правильно. Брокеры сообщений помогают этим приложениям взаимодействовать,
делая процесс передачи данных быстрым, надёжным и безопасным.

Переданные в брокер сообщения — это данные, которые нужно переправить от одного приложения к другому. 
Это могут быть, например, команды, оповещения или сообщения об ошибках. Формат таких сообщений может быть разным, 
в зависимости от того, что нужно передать и какие технологии используются.

_Рассмотрим пример:_

Представьте интернет-магазин, где есть три сервиса: 
* один обрабатывает заказы
* второй управляет складом
* третий отправляет уведомления клиентам

Когда клиент делает заказ, сервис для обработки заказов должен сообщить складу, что нужно зарезервировать товар. 
После этого склад уведомляет о готовности, и сервис заказов передаёт информацию сервису уведомлений, 
который отправляет клиенту сообщение о готовности товара.

В этом процессе брокер сообщений помогает каждому сервису обмениваться данными, не заботясь о том, как именно эти сервисы работают.
Он гарантирует, что все сообщения доставлены, даже если что-то пошло не так в момент отправки.

Таким образом, приложения могут сосредоточиться на своих задачах, а брокер берёт на себя заботу о том, 
чтобы данные были переданы вовремя и правильно.

## **Основные компоненты**
Чтобы понять, как работают брокеры сообщений, нужно разобраться в основных компонентах, которые их составляют.
Это поможет лучше понять, как приложения обмениваются данными и как можно использовать брокеры для повышения эффективности системы.

1. Producer (Отправитель) — это сервис или приложение, которое создаёт и отправляет сообщения. 
Оно передаёт информацию, чтобы другие сервисы могли её получить. 
Например, сервис обработки заказов или склад может быть отправителем, когда сообщает о новом заказе или о том, что заказ готов к отправке.

2. Consumer (Потребитель) — это сервис или приложение, которое получает и обрабатывает сообщения. 
Потребитель "подписывается" на определённые очереди сообщений и ждёт, когда туда поступят новые данные. 
В примере выше склад и сервис уведомлений могут быть потребителями: они получают сообщения о заказах и их готовности.

3. Subscription (Подписка) — это способ, с помощью которого потребитель указывает, какие сообщения его интересуют. 
Потребитель может выбрать только нужные ему сообщения, а не обрабатывать всё подряд. 
Например, склад будет получать только сообщения о заказах, а сервис уведомлений — только сообщения о том, что заказ готов.

4. Message (Сообщение) — это данные, которые отправляет Producer и получает Consumer. 
Сообщение может содержать, например, информацию о заказе или статус готовности. 
Оно состоит из заголовка (где могут быть технические данные, как время отправки) и тела, в котором передаётся информация.

5. Broker (Брокер сообщений) — это основной элемент системы. Он принимает сообщения от отправителей и передаёт их потребителям. 
Брокер управляет процессом обмена сообщениями, обеспечивая их доставку и сохраняя сообщения до тех пор, пока потребитель не будет готов их принять.


## Квиз
**Вопрос 1:** 

Что такое брокер сообщений?

A) Сервис для хранения данных между приложениями

B) Система для отправки сообщений пользователям

C) Посредник, передающий данные между разными приложениями

D) База данных для хранения сообщений


Правильный ответ: C) Посредник, передающий данные между разными приложениями

Пояснение: Брокер сообщений — это сервис, который помогает передавать данные между разными приложениями, обеспечивая надёжную и удобную передачу данных.

**Вопрос 2:** 

Какую роль выполняет Consumer в системе брокера сообщений?

A) Создаёт и отправляет сообщения

B) Хранит сообщения до их обработки

C) Получает и обрабатывает сообщения

D) Управляет очередями сообщений

Правильный ответ: C) Получает и обрабатывает сообщения

Пояснение: Consumer — это компонент системы, который подписывается на очереди сообщений и получает данные для обработки.